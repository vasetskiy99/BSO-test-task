"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[9460],{98352:(x,p,t)=>{t.r(p),t.d(p,{default:()=>G});var e=t(67294),o=t(88767),y=t(86896),l=t(41054),i=t(86597),L=t(14087),h=t(185),O=t(53979),g=t(49066),A=t(29728),v=t(41580),B=t(11047),f=t(75515),n=t(11276),s=t(74571),d=t(48302),r=t(82562),c=t(85018),E=t(81912),a=t(89031);const P=[{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email"),defaultMessage:"One account per email address"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email"),defaultMessage:"Disallow the user to create multiple accounts using the same email address with different authentication providers."},name:"unique_email",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.sign-up"),defaultMessage:"Enable sign-ups"},description:{id:(0,a.OB)("EditForm.inputToggle.description.sign-up"),defaultMessage:"When disabled (OFF), the registration process is forbidden. No one can subscribe anymore no matter the used provider."},name:"allow_register",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-reset-password"),defaultMessage:"Reset password page"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-reset-password"),defaultMessage:"URL of your application's reset password page."},placeholder:{id:(0,a.OB)("EditForm.inputToggle.placeholder.email-reset-password"),defaultMessage:"ex: https://youtfrontend.com/reset-password"},name:"email_reset_password",type:"text",size:{col:6,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-confirmation"),defaultMessage:"Enable email confirmation"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-confirmation"),defaultMessage:"When enabled (ON), new registered users receive a confirmation email."},name:"email_confirmation",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-confirmation-redirection"),defaultMessage:"Redirection url"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-confirmation-redirection"),defaultMessage:"After you confirmed your email, choose where you will be redirected."},placeholder:{id:(0,a.OB)("EditForm.inputToggle.placeholder.email-confirmation-redirection"),defaultMessage:"ex: https://youtfrontend.com/email-confirmation"},name:"email_confirmation_redirection",type:"text",size:{col:6,xs:12}}];var b=t(87561);const F=new RegExp("(^$)|((.+:\\/\\/.*)(d*)\\/?(.*))"),z=b.Ry().shape({email_confirmation_redirection:b.nK().when("email_confirmation",{is:!0,then:b.Z_().matches(F).required(),otherwise:b.Z_().nullable()}),email_reset_password:b.Z_(i.I0.string).matches(F,i.I0.regex).nullable()}),U=async()=>{const{get:u}=(0,i.tg)(),{data:M}=await u((0,a.Gc)("advanced"));return M},W=u=>{const{put:M}=(0,i.tg)();return M((0,a.Gc)("advanced"),u)},N=()=>e.createElement(i.O4,{permissions:E.Z.readAdvancedSettings},e.createElement(H,null)),H=()=>{const{formatMessage:u}=(0,y.Z)(),M=(0,i.lm)(),{lockApp:K,unlockApp:D}=(0,i.o1)(),{notifyStatus:j}=(0,L.G)(),$=(0,o.useQueryClient)();(0,i.go)();const Q=(0,e.useMemo)(()=>({update:E.Z.updateAdvancedSettings}),[]),{isLoading:V,allowedActions:{canUpdate:X}}=(0,i.ss)(Q),{status:J,data:I}=(0,o.useQuery)("advanced",()=>U(),{onSuccess(){j(u({id:(0,a.OB)("Form.advancedSettings.data.loaded"),defaultMessage:"Advanced settings data has been loaded"}))},onError(){M({type:"warning",message:{id:(0,a.OB)("notification.error"),defaultMessage:"An error occured"}})}}),Y=V||J!=="success",Z=(0,o.useMutation)(R=>W(R),{async onSuccess(){await $.invalidateQueries("advanced"),M({type:"success",message:{id:(0,a.OB)("notification.success.saved"),defaultMessage:"Saved"}}),D()},onError(){M({type:"warning",message:{id:(0,a.OB)("notification.error"),defaultMessage:"An error occured"}}),D()},refetchActive:!0}),{isLoading:k}=Z,q=async R=>{K();const S=R.email_confirmation?R.email_confirmation_redirection:"";await Z.mutateAsync({...R,email_confirmation_redirection:S})};return Y?e.createElement(h.o,{"aria-busy":"true"},e.createElement(i.SL,{name:u({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(O.T,{title:u({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(g.D,null,e.createElement(i.dO,null))):e.createElement(h.o,{"aria-busy":k},e.createElement(i.SL,{name:u({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(l.J9,{onSubmit:q,initialValues:I.settings,validateOnChange:!1,validationSchema:z,enableReinitialize:!0},({errors:R,values:S,handleChange:w,isSubmitting:_})=>e.createElement(i.l0,null,e.createElement(O.T,{title:u({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"}),primaryAction:e.createElement(A.z,{loading:_,type:"submit",disabled:!X,startIcon:e.createElement(c.Z,null),size:"S"},u({id:"global.save",defaultMessage:"Save"}))}),e.createElement(g.D,null,e.createElement(v.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(B.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(f.Z,{variant:"delta",as:"h2"},u({id:"global.settings",defaultMessage:"Settings"})),e.createElement(n.r,{gap:6},e.createElement(s.P,{col:6,s:12},e.createElement(d.P,{label:u({id:(0,a.OB)("EditForm.inputSelect.label.role"),defaultMessage:"Default role for authenticated users"}),value:S.default_role,hint:u({id:(0,a.OB)("EditForm.inputSelect.description.role"),defaultMessage:"It will attach the new authenticated user to the selected role."}),onChange:m=>w({target:{name:"default_role",value:m}})},I.roles.map(m=>e.createElement(r.W,{key:m.type,value:m.type},m.name)))),P.map(m=>{let C=S[m.name];return C||(C=m.type==="bool"?!1:""),e.createElement(s.P,{key:m.name,...m.size},e.createElement(i.jm,{...m,value:C,error:R[m.name],disabled:m.name==="email_confirmation_redirection"&&S.email_confirmation===!1,onChange:w}))}))))))))},G=N},89031:(x,p,t)=>{t.d(p,{YX:()=>l,Gc:()=>h,OB:()=>O.Z});var e=t(41609),o=t.n(e);const l=g=>Object.keys(g).reduce((A,v)=>{const B=g[v].controllers,f=Object.keys(B).reduce((n,s)=>(o()(B[s])||(n[s]=B[s]),n),{});return o()(f)||(A[v]={controllers:f}),A},{});var i=t(31498);const h=g=>`/${i.Z}/${g}`;var O=t(84757)},49066:(x,p,t)=>{t.d(p,{D:()=>l});var e=t(67294),o=t(45697),y=t(41580);const l=({children:i})=>e.createElement(y.x,{paddingLeft:10,paddingRight:10},i);l.propTypes={children:o.node.isRequired}},53979:(x,p,t)=>{t.d(p,{T:()=>v});var e=t(67294),o=t(45697),y=t(46449),l=t(41580),i=t(11047);const L=n=>{const s=(0,e.useRef)(null),[d,r]=(0,e.useState)(!0),c=([E])=>{r(E.isIntersecting)};return(0,e.useEffect)(()=>{const E=s.current,a=new IntersectionObserver(c,n);return E&&a.observe(s.current),()=>{E&&a.disconnect()}},[s,n]),[s,d]};var h=t(95355);const O=(n,s)=>{const d=(0,h.W)(s);(0,e.useLayoutEffect)(()=>{const r=new ResizeObserver(d);return Array.isArray(n)?n.forEach(c=>{c.current&&r.observe(c.current)}):n.current&&r.observe(n.current),()=>{r.disconnect()}},[n,d])};var g=t(75515);const A=()=>{const n=(0,e.useRef)(null),[s,d]=(0,e.useState)(null),[r,c]=L({root:null,rootMargin:"0px",threshold:0});return O(r,()=>{r.current&&d(r.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{n.current&&d(n.current.getBoundingClientRect())},[n]),{containerRef:r,isVisible:c,baseHeaderLayoutRef:n,headerSize:s}},v=n=>{const{containerRef:s,isVisible:d,baseHeaderLayoutRef:r,headerSize:c}=A();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:c?.height},ref:s},d&&e.createElement(f,{ref:r,...n})),!d&&e.createElement(f,{...n,sticky:!0,width:c?.width}))};v.displayName="HeaderLayout";const B=(0,y.ZP)(l.x)`
  width: ${n=>n.width}px;
`,f=e.forwardRef(({navigationAction:n,primaryAction:s,secondaryAction:d,subtitle:r,title:c,sticky:E,width:a,...T},P)=>{const b=typeof r=="string";return E?e.createElement(B,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:a,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(i.k,{justifyContent:"space-between"},e.createElement(i.k,null,n&&e.createElement(l.x,{paddingRight:3},n),e.createElement(l.x,null,e.createElement(g.Z,{variant:"beta",as:"h1",...T},c),b?e.createElement(g.Z,{variant:"pi",textColor:"neutral600"},r):r),d?e.createElement(l.x,{paddingLeft:4},d):null),e.createElement(i.k,null,s?e.createElement(l.x,{paddingLeft:2},s):void 0))):e.createElement(l.x,{ref:P,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0},n?e.createElement(l.x,{paddingBottom:2},n):null,e.createElement(i.k,{justifyContent:"space-between"},e.createElement(i.k,{minWidth:0},e.createElement(g.Z,{as:"h1",variant:"alpha",...T},c),d?e.createElement(l.x,{paddingLeft:4},d):null),s),b?e.createElement(g.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},r):r)});f.displayName="BaseHeaderLayout",f.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},f.propTypes={navigationAction:o.node,primaryAction:o.node,secondaryAction:o.node,sticky:o.bool,subtitle:o.oneOfType([o.string,o.node]),title:o.string.isRequired,width:o.number},v.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},v.propTypes={navigationAction:o.node,primaryAction:o.node,secondaryAction:o.node,subtitle:o.oneOfType([o.string,o.node]),title:o.string.isRequired}},185:(x,p,t)=>{t.d(p,{o:()=>i});var e=t(67294),o=t(45697),y=t(46449);const l=y.ZP.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,i=({labelledBy:L,...h})=>{const O=L||"main-content-title";return e.createElement(l,{"aria-labelledby":O,id:"main-content",tabIndex:-1,...h})};i.defaultProps={labelledBy:void 0},i.propTypes={labelledBy:o.string}}}]);
